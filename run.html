<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Animated Counter (200+)</title>
    <!-- Tailwind CDN for quick styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      /* Small visual polish */
      .stat-card {
        background: linear-gradient(180deg, #ffffff 0%, #f7fafc 100%);
      }
    </style>
  </head>
  <body class="min-h-screen flex items-center justify-center bg-gray-50 p-6">
    <section
      class="stat-card max-w-sm w-full rounded-2xl shadow-lg p-6 text-center"
    >
      <!-- Counter block: change data-target to whatever number you want -->
      <div>
        <h3 class="text-4xl font-extrabold">
          <span
            class="js-counter"
            data-target="200"
            data-suffix="+"
            data-duration="1800"
            aria-live="polite"
            >0</span
          >
        </h3>
        <p class="text-gray-600 mt-1">International Brands</p>
      </div>
    </section>

    <script>
      (function () {
        const counters = document.querySelectorAll(".js-counter");

        function animateCounter(el) {
          const target = parseInt(el.getAttribute("data-target") || "0", 10);
          const suffix = el.getAttribute("data-suffix") || "";
          const duration = parseInt(
            el.getAttribute("data-duration") || "1500",
            10
          );
          if (isNaN(target) || target < 0) return;

          const start = 0;
          const startTime = performance.now();

          function tick(now) {
            const elapsed = now - startTime;
            const progress = Math.min(elapsed / duration, 1);

            const eased = 1 - Math.pow(1 - progress, 3);
            const current = Math.floor(start + (target - start) * eased);
            el.textContent = current.toLocaleString() + suffix;

            if (progress < 1) {
              requestAnimationFrame(tick);
            } else {
              el.textContent = target.toLocaleString() + suffix;
            }
          }

          requestAnimationFrame(tick);
        }

        if ("IntersectionObserver" in window) {
          const obs = new IntersectionObserver(
            (entries, observer) => {
              entries.forEach((entry) => {
                if (entry.isIntersecting) {
                  animateCounter(entry.target);
                  observer.unobserve(entry.target);
                }
              });
            },
            { threshold: 0.4 }
          );

          counters.forEach((c) => obs.observe(c));
        } else {
          // fallback: animate immediately
          counters.forEach((c) => animateCounter(c));
        }

        // Optional: allow rerunning the animation programmatically
        window.animateCounters = function () {
          counters.forEach((c) => animateCounter(c));
        };
      })();
    </script>
  </body>
</html>
